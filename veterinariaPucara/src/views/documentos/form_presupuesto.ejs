<%- include('../layouts/layout', { body: `
<div class="page-header">
  <h2>Nuevo presupuesto</h2>
</div>

<div class="card shadow-sm">
  <div class="card-body">
    <form
      method="POST"
      action="/documentos/owner/${owner_id}/presupuesto/nuevo"
      class="form"
      id="f"
    >
      <input type="hidden" name="owner_id" value="${owner_id}" />

      <label>
        Mascota (ID)
        <input name="pet_id" value="${pet_id}" class="form-control" required />
      </label>

      <label>
        Título
        <input name="titulo" class="form-control" required />
      </label>

      <label>
        Notas
        <textarea name="notas" class="form-control"></textarea>
      </label>

      <div class="border rounded p-2 mt-2">
        <div class="d-flex align-items-center justify-content-between mb-2">
          <strong>Ítems</strong>
          <button type="button" class="btn btn--outline" onclick="addItem()">
            + Agregar ítem
          </button>
        </div>
        <div id="items"></div>
      </div>

      <button class="btn mt-3">Guardar</button>
    </form>
  </div>
</div>

<script>
  function addItem(desc = "", qty = "", price = "") {
    const row = document.createElement("div");
    row.className = "grid mt-2";
    row.innerHTML =
      '<input name="item_desc" class="form-control" placeholder="Descripción" value="' +
      desc +
      '" required />' +
      '<input name="item_qty" class="form-control" type="number" min="0" step="1" placeholder="Cant." value="' +
      qty +
      '" required />' +
      '<input name="item_price" class="form-control" type="number" min="0" step="0.01" placeholder="Precio" value="' +
      price +
      '" required />' +
      '<button type="button" class="btn btn--outline" onclick="this.parentElement.remove()">Eliminar</button>';
    document.getElementById("items").appendChild(row);
  }
  addItem();
</script>
` }) %>
